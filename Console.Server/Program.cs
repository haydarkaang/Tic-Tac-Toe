using Service;

#region Banner
const string banner = @"'##:::::::'########:'####::'######:::::::::::'########::::'###:::::'######:::::::::::'########::'#######::'########: 
. ##::::::... ##..::. ##::'##... ##::::::::::... ##..::::'## ##:::'##... ##::::::::::... ##..::'##.... ##: ##.....:: 
:. ##:::::::: ##::::: ##:: ##:::..:::::::::::::: ##:::::'##:. ##:: ##:::..:::::::::::::: ##:::: ##:::: ##: ##::::::: 
::. ##::::::: ##::::: ##:: ##:::::::'#######:::: ##::::'##:::. ##: ##:::::::'#######:::: ##:::: ##:::: ##: ######::: 
:: ##:::::::: ##::::: ##:: ##:::::::........:::: ##:::: #########: ##:::::::........:::: ##:::: ##:::: ##: ##...:::: 
: ##::::::::: ##::::: ##:: ##::: ##::::::::::::: ##:::: ##.... ##: ##::: ##::::::::::::: ##:::: ##:::: ##: ##::::::: 
 ##:::::::::: ##::::'####:. ######:::::::::::::: ##:::: ##:::: ##:. ######:::::::::::::: ##::::. #######:: ########: 
..:::::::::::..:::::....:::......:::::::::::::::..:::::..:::::..:::......:::::::::::::::..::::::.......:::........:: 
:::::::::::::'######::'########:'########::'##::::'##:'########:'########::::::::::::::::::::::::::::::::::::::::::::
::::::::::::'##... ##: ##.....:: ##.... ##: ##:::: ##: ##.....:: ##.... ##:::::::::::::::::::::::::::::::::::::::::::
:::::::::::: ##:::..:: ##::::::: ##:::: ##: ##:::: ##: ##::::::: ##:::: ##:::::::::::::::::::::::::::::::::::::::::::
::::::::::::. ######:: ######::: ########:: ##:::: ##: ######::: ########::::::::::::::::::::::::::::::::::::::::::::
:::::::::::::..... ##: ##...:::: ##.. ##:::. ##:: ##:: ##...:::: ##.. ##:::::::::::::::::::::::::::::::::::::::::::::
::::::::::::'##::: ##: ##::::::: ##::. ##:::. ## ##::: ##::::::: ##::. ##::::::::::::::::::::::::::::::::::::::::::::
::::::::::::. ######:: ########: ##:::. ##:::. ###:::: ########: ##:::. ##:::::::::::::::::::::::::::::::::::::::::::
:::::::::::::......:::........::..:::::..:::::...:::::........::..:::::..::::::::::::::::::::::::::::::::::::::::::::";
#endregion

#region Globals
Service.Grpc.Manager grpcManager;
Task<ServiceInfo> t;
#endregion

Log.Prt(banner + System.Environment.NewLine, Log.LogType.Banner);

grpcManager = new Service.Grpc.Manager();
t = grpcManager.Up();

if (!t.Result.Success)
{
    Log.Prt(t.Result.Message, Log.LogType.Error);
    Console.ReadKey();
    Environment.Exit(-1);
}

var text = $"Game service has been started @ {Service.Network.GetNetworkInfo()}:{grpcManager.ServicePort}. " +
    "Please don't close the window during game sessions.";
Log.Prt(text, Log.LogType.Message);

while (true)
{
    Console.ReadLine();
}